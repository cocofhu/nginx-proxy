{
  "server_name": "api.example.com",
  "listen_ports": [80, 443],
  "ssl_cert": "/path/to/cert.pem",
  "ssl_key": "/path/to/key.pem",
  "locations": [
    {
      "path": "/api/v1",
      "upstreams": [
        {
          "condition_ip": "",
          "target": "http://backend-v1:8080",
          "headers": {
            "X-API-Version": "v1"
          }
        },
        {
          "condition_ip": "",
          "target": "http://backend-v2:8080",
          "headers": {
            "X-API-Version": "v2"
          }
        },
        {
          "condition_ip": "",
          "target": "http://backend-default:8080"
        }
      ]
    },
    {
      "path": "/api/mobile",
      "upstreams": [
        {
          "condition_ip": "",
          "target": "http://mobile-backend:8080",
          "headers": {
            "User-Agent": "Mobile"
          }
        },
        {
          "condition_ip": "192.168.1.0/24",
          "target": "http://internal-backend:8080",
          "headers": {
            "X-Internal": "true"
          }
        },
        {
          "condition_ip": "",
          "target": "http://web-backend:8080"
        }
      ]
    }
  ]
}